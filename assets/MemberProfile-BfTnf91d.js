var H=Object.defineProperty;var M=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var T=(i,t,a)=>t in i?H(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a,S=(i,t)=>{for(var a in t||(t={}))J.call(t,a)&&T(i,a,t[a]);if(M)for(var a of M(t))K.call(t,a)&&T(i,a,t[a]);return i};var D=(i,t,a)=>new Promise((y,b)=>{var c=r=>{try{p(a.next(r))}catch(u){b(u)}},d=r=>{try{p(a.throw(r))}catch(u){b(u)}},p=r=>r.done?y(r.value):Promise.resolve(r.value).then(c,d);p((a=a.apply(i,t)).next())});import{f as N,n as O,g as Q,e as R,c as W,w as X,I as Y}from"./index-CDxJsEB3.js";/* empty css              */import{C as Z}from"./index-DYpDMpii.js";import{F as ee}from"./index-BvfrUZFn.js";/* empty css              *//* empty css              */import{C as le}from"./index-WPZnnyNE.js";import{N as oe}from"./index-CvtmVt3d.js";import{h as te,a as l,_ as ae,r as g,c as ne,k as n,t as I,n as se,b as s,e as ie,q as ue,m as E,o as q,g as U}from"./index-CYNoNFn7.js";import{L as de}from"./use-touch-CoLEfbaL.js";import{B as re}from"./index-BTb55al6.js";import{P as me}from"./index--jaruAqB.js";import{F as pe}from"./index-C9l5sb2Z.js";import{a as w}from"./function-call-B8E4hwbK.js";import{a as ve}from"./function-call-CrsSUfte.js";import"./use-route-5Jp667pb.js";import"./use-id-zzKfe8rB.js";import"./use-placeholder-CGcD_-36.js";import"./interceptor-SwkErRcB.js";const[ce,L]=W("switch"),fe={size:O,loading:Boolean,disabled:Boolean,modelValue:N,activeColor:String,inactiveColor:String,activeValue:{type:N,default:!0},inactiveValue:{type:N,default:!1}};var Ve=te({name:ce,props:fe,emits:["change","update:modelValue"],setup(i,{emit:t,slots:a}){const y=()=>i.modelValue===i.activeValue,b=()=>{if(!i.disabled&&!i.loading){const d=y()?i.inactiveValue:i.activeValue;t("update:modelValue",d),t("change",d)}},c=()=>{if(i.loading){const d=y()?i.activeColor:i.inactiveColor;return l(de,{class:L("loading"),color:d},null)}if(a.node)return a.node()};return Q(()=>i.modelValue),()=>{var d;const{size:p,loading:r,disabled:u,activeColor:v,inactiveColor:C}=i,_=y(),P={fontSize:R(p),backgroundColor:_?v:C};return l("div",{role:"switch",class:L({on:_,loading:r,disabled:u}),style:P,tabindex:u?void 0:0,"aria-checked":_,onClick:b},[l("div",{class:L("node")},[c()]),(d=a.background)==null?void 0:d.call(a)])}}});const ke=X(Ve),ge={class:"profile-page"},ye={class:"user-card"},be=["src"],we={class:"user-details"},Ce={class:"user-name"},_e={class:"user-level"},he={style:{color:"#e53e3e"}},Ue={class:"logout-section"},$e={class:"popup-content"},Pe={class:"popup-header"},xe={style:{padding:"16px"}},ze={class:"popup-content"},Be={class:"popup-header"},Fe={style:{padding:"16px"}},Se={class:"popup-content"},Ne={class:"popup-header"},Ie={style:{padding:"16px"}},Ee={__name:"MemberProfile",setup(i){const t=g({id:"M-2024-0158",name:"陳大明",level:"committee",phone:"0912-345-678",email:"daming.chen@email.com",company:"大明科技股份有限公司",title:"總經理",address:"台北市中正區忠孝東路100號",avatar:"https://ui-avatars.com/api/?name=陳大明&background=1a365d&color=fff&size=128"}),a=E(()=>({committee:{name:"未來街坊圈圈委",icon:"⭐⭐⭐"},citizen:{name:"未來街坊圈圈民",icon:"⭐⭐"},friend:{name:"未來街坊圈圈友",icon:"⭐"}})[t.value.level]),y=E(()=>t.value.phone.replace(/(\d{4})-(\d{3})-(\d{3})/,"$1-***-$3")),b=E(()=>{const V=t.value.email,[e,x]=V.split("@");return`${e.slice(0,2)}***@${x}`}),c=g({events:!0,payment:!0,system:!0}),d=g(!1),p=g(!1),r=g(!1),u=g({name:t.value.name,phone:t.value.phone,email:t.value.email,company:t.value.company,title:t.value.title,address:t.value.address}),v=g({current:"",new:"",confirm:""}),C=g(""),_=()=>{t.value=S(S({},t.value),u.value),w({type:"success",message:"儲存成功"}),d.value=!1},P=()=>{if(v.value.new!==v.value.confirm){w({type:"fail",message:"兩次密碼不一致"});return}w({type:"success",message:"密碼修改成功"}),p.value=!1,v.value={current:"",new:"",confirm:""}},G=()=>{w({message:"客服電話：02-1234-5678"})},j=()=>{w({type:"success",message:"感謝您的反饋！"}),r.value=!1,C.value=""},A=()=>D(null,null,function*(){try{yield ve({title:"確認登出",message:"確定要登出帳號嗎？"}),w({message:"已登出"})}catch(V){}});return(V,e)=>{const x=oe,h=Y,m=Z,k=le,z=ke,$=re,f=ee,B=pe,F=me;return q(),ne("div",ge,[l(x,{title:"我的"}),n("div",ye,[n("div",{class:"user-info",onClick:e[0]||(e[0]=o=>V.$router.push("/m/membership"))},[n("img",{src:t.value.avatar,class:"user-avatar"},null,8,be),n("div",we,[n("div",Ce,I(t.value.name),1),n("div",_e,[n("span",{class:se(["level-badge",t.value.level])},I(a.value.icon)+" "+I(a.value.name),3)])]),l(h,{name:"arrow",color:"#c0c4cc"})])]),l(k,{inset:"",title:"帳戶設定"},{default:s(()=>[l(m,{title:"個人資料",icon:"user-o","is-link":"",onClick:e[1]||(e[1]=o=>d.value=!0)}),l(m,{title:"修改密碼",icon:"lock","is-link":"",onClick:e[2]||(e[2]=o=>p.value=!0)}),l(m,{title:"綁定手機",icon:"phone-o",value:y.value,"is-link":""},null,8,["value"]),l(m,{title:"綁定信箱",icon:"envelop-o",value:b.value,"is-link":""},null,8,["value"])]),_:1}),l(k,{inset:"",title:"我的服務"},{default:s(()=>[l(m,{title:"我的產品",icon:"goods-collect-o","is-link":"",onClick:e[3]||(e[3]=o=>V.$router.push("/m/products"))},{label:s(()=>[n("span",he,[l(h,{name:"lock"}),e[26]||(e[26]=U(" 未開通 · 需管理員授權",-1))])]),_:1}),l(m,{title:"街坊商圈",icon:"shop-o","is-link":"",onClick:e[4]||(e[4]=o=>V.$router.push("/m/marketplace")),label:"瀏覽街坊產品"})]),_:1}),l(k,{inset:"",title:"通知設定"},{default:s(()=>[l(m,{title:"活動通知",icon:"bell"},{"right-icon":s(()=>[l(z,{modelValue:c.value.events,"onUpdate:modelValue":e[5]||(e[5]=o=>c.value.events=o),size:"20"},null,8,["modelValue"])]),_:1}),l(m,{title:"繳費提醒",icon:"clock-o"},{"right-icon":s(()=>[l(z,{modelValue:c.value.payment,"onUpdate:modelValue":e[6]||(e[6]=o=>c.value.payment=o),size:"20"},null,8,["modelValue"])]),_:1}),l(m,{title:"系統公告",icon:"volume-o"},{"right-icon":s(()=>[l(z,{modelValue:c.value.system,"onUpdate:modelValue":e[7]||(e[7]=o=>c.value.system=o),size:"20"},null,8,["modelValue"])]),_:1})]),_:1}),l(k,{inset:"",title:"其他"},{default:s(()=>[l(m,{title:"聯絡客服",icon:"service-o","is-link":"",onClick:G}),l(m,{title:"意見反饋",icon:"comment-o","is-link":"",onClick:e[8]||(e[8]=o=>r.value=!0)}),l(m,{title:"關於我們",icon:"info-o","is-link":""}),l(m,{title:"使用條款",icon:"description","is-link":""})]),_:1}),t.value.level==="committee"?(q(),ie(k,{key:0,inset:"",title:"管理功能"},{default:s(()=>[l(m,{title:"進入管理後台",icon:"setting-o","is-link":"",onClick:e[9]||(e[9]=o=>V.$router.push("/admin"))},{label:s(()=>[...e[27]||(e[27]=[n("span",{style:{color:"#d69e2e"}},"圈圈委專屬",-1)])]),_:1})]),_:1})):ue("",!0),n("div",Ue,[l($,{type:"default",block:"",round:"",onClick:A},{default:s(()=>[...e[28]||(e[28]=[U(" 登出帳號 ",-1)])]),_:1})]),e[35]||(e[35]=n("div",{class:"version-info"}," 版本 1.0.0 ",-1)),l(F,{show:d.value,"onUpdate:show":e[17]||(e[17]=o=>d.value=o),position:"bottom",round:"",style:{height:"70%"}},{default:s(()=>[n("div",$e,[n("div",Pe,[e[29]||(e[29]=n("span",null,"編輯個人資料",-1)),l(h,{name:"cross",onClick:e[10]||(e[10]=o=>d.value=!1)})]),l(B,{onSubmit:_},{default:s(()=>[l(k,{inset:""},{default:s(()=>[l(f,{modelValue:u.value.name,"onUpdate:modelValue":e[11]||(e[11]=o=>u.value.name=o),label:"姓名",placeholder:"請輸入姓名"},null,8,["modelValue"]),l(f,{modelValue:u.value.phone,"onUpdate:modelValue":e[12]||(e[12]=o=>u.value.phone=o),label:"電話",placeholder:"請輸入電話"},null,8,["modelValue"]),l(f,{modelValue:u.value.email,"onUpdate:modelValue":e[13]||(e[13]=o=>u.value.email=o),label:"信箱",placeholder:"請輸入信箱"},null,8,["modelValue"]),l(f,{modelValue:u.value.company,"onUpdate:modelValue":e[14]||(e[14]=o=>u.value.company=o),label:"公司",placeholder:"請輸入公司名稱"},null,8,["modelValue"]),l(f,{modelValue:u.value.title,"onUpdate:modelValue":e[15]||(e[15]=o=>u.value.title=o),label:"職稱",placeholder:"請輸入職稱"},null,8,["modelValue"]),l(f,{modelValue:u.value.address,"onUpdate:modelValue":e[16]||(e[16]=o=>u.value.address=o),label:"地址",type:"textarea",rows:"2",placeholder:"請輸入聯絡地址"},null,8,["modelValue"])]),_:1}),n("div",xe,[l($,{type:"primary",block:"",round:"","native-type":"submit"},{default:s(()=>[...e[30]||(e[30]=[U("儲存",-1)])]),_:1})])]),_:1})])]),_:1},8,["show"]),l(F,{show:p.value,"onUpdate:show":e[22]||(e[22]=o=>p.value=o),position:"bottom",round:"",style:{height:"50%"}},{default:s(()=>[n("div",ze,[n("div",Be,[e[31]||(e[31]=n("span",null,"修改密碼",-1)),l(h,{name:"cross",onClick:e[18]||(e[18]=o=>p.value=!1)})]),l(B,{onSubmit:P},{default:s(()=>[l(k,{inset:""},{default:s(()=>[l(f,{modelValue:v.value.current,"onUpdate:modelValue":e[19]||(e[19]=o=>v.value.current=o),type:"password",label:"目前密碼",placeholder:"請輸入目前密碼"},null,8,["modelValue"]),l(f,{modelValue:v.value.new,"onUpdate:modelValue":e[20]||(e[20]=o=>v.value.new=o),type:"password",label:"新密碼",placeholder:"請輸入新密碼"},null,8,["modelValue"]),l(f,{modelValue:v.value.confirm,"onUpdate:modelValue":e[21]||(e[21]=o=>v.value.confirm=o),type:"password",label:"確認密碼",placeholder:"請再次輸入新密碼"},null,8,["modelValue"])]),_:1}),n("div",Fe,[l($,{type:"primary",block:"",round:"","native-type":"submit"},{default:s(()=>[...e[32]||(e[32]=[U("確認修改",-1)])]),_:1})])]),_:1})])]),_:1},8,["show"]),l(F,{show:r.value,"onUpdate:show":e[25]||(e[25]=o=>r.value=o),position:"bottom",round:"",style:{height:"50%"}},{default:s(()=>[n("div",Se,[n("div",Ne,[e[33]||(e[33]=n("span",null,"意見反饋",-1)),l(h,{name:"cross",onClick:e[23]||(e[23]=o=>r.value=!1)})]),l(B,{onSubmit:j},{default:s(()=>[l(k,{inset:""},{default:s(()=>[l(f,{modelValue:C.value,"onUpdate:modelValue":e[24]||(e[24]=o=>C.value=o),type:"textarea",rows:"5",placeholder:"請輸入您的意見或建議...","show-word-limit":"",maxlength:"500"},null,8,["modelValue"])]),_:1}),n("div",Ie,[l($,{type:"primary",block:"",round:"","native-type":"submit"},{default:s(()=>[...e[34]||(e[34]=[U("提交反饋",-1)])]),_:1})])]),_:1})])]),_:1},8,["show"])])}}},ol=ae(Ee,[["__scopeId","data-v-9004e466"]]);export{ol as default};
