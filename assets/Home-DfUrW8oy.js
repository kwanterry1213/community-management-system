var Ie=Object.defineProperty,Be=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ie=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var re=(e,o,t)=>o in e?Ie(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,ce=(e,o)=>{for(var t in o||(o={}))De.call(o,t)&&re(e,t,o[t]);if(ie)for(var t of ie(o))He.call(o,t)&&re(e,t,o[t]);return e},ue=(e,o)=>Be(e,$e(o));import{c as M,C as ne,f as B,i as Me,n as H,x as ae,u as _e,D as q,h as j,E as ke,H as de,t as J,m as F,F as W,l as xe,p as me,g as Ne,G as Re,J as Ue,w as se,K as Fe,e as oe,v as ze,L as Ae,z as Ke,y as Le,I as ye}from"./index-YqU4SObx.js";/* empty css              *//* empty css              *//* empty css              */import{C as qe}from"./index-DVmShwbQ.js";import{F as Ye}from"./index-9l3656j9.js";import{C as Ge}from"./index-BeWBmNMz.js";import{u as je}from"./member-D1V4Lo7H.js";import{g as z,y as Je,a,b as V,m as O,h as X,u as ve,s as Te,_ as Qe,c as fe,k as u,t as U,f as Z,w as S,o as ee,F as We,l as Xe,d as Ze,n as et}from"./index-BndNiVBj.js";import{u as Ce,a as tt,L as nt,B as ot}from"./use-touch-BjYcLiha.js";import{P as lt}from"./index-BLz4vbtE.js";import{F as at}from"./index-C94g31YT.js";import{a as st}from"./function-call-CEQAyDn4.js";import"./use-id-B1bTAKgC.js";const[it,P,pe]=M("picker"),Oe=e=>e.find(o=>!o.disabled)||e[0];function rt(e,o){const t=e[0];if(t){if(Array.isArray(t))return"multiple";if(o.children in t)return"cascade"}return"default"}function G(e,o){o=ne(o,0,e.length);for(let t=o;t<e.length;t++)if(!e[t].disabled)return t;for(let t=o-1;t>=0;t--)if(!e[t].disabled)return t;return 0}const ge=(e,o,t)=>o!==void 0&&e.some(c=>c[t.value]===o);function le(e,o,t){const c=e.findIndex(v=>v[t.value]===o),i=G(e,c);return e[i]}function ct(e,o,t){const c=[];let i={[o.children]:e},v=0;for(;i&&i[o.children];){const h=i[o.children],_=t.value[v];if(i=Me(_)?le(h,_,o):void 0,!i&&h.length){const b=Oe(h)[o.value];i=le(h,b,o)}v++,c.push(h)}return c}function ut(e){const{transform:o}=window.getComputedStyle(e),t=o.slice(7,o.length-1).split(", ")[5];return Number(t)}function dt(e){return B({text:"text",value:"value",children:"children"},e)}const be=200,he=300,mt=15,[we,te]=M("picker-column"),Se=Symbol(we);var vt=z({name:we,props:{value:H,fields:q(Object),options:j(),readonly:Boolean,allowHtml:Boolean,optionHeight:q(Number),swipeDuration:q(H),visibleOptionNum:q(H)},emits:["change","clickOption","scrollInto"],setup(e,{emit:o,slots:t}){let c,i,v,h,_;const b=V(),k=V(),r=V(0),n=V(0),p=tt(),y=()=>e.options.length,C=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,T=m=>{let g=G(e.options,m);const l=-g*e.optionHeight,s=()=>{g>y()-1&&(g=G(e.options,m));const f=e.options[g][e.fields.value];f!==e.value&&o("change",f)};c&&l!==r.value?_=s:s(),r.value=l},x=()=>e.readonly||!e.options.length,w=m=>{c||x()||(_=null,n.value=be,T(m),o("clickOption",e.options[m]))},E=m=>ne(Math.round(-m/e.optionHeight),0,y()-1),$=O(()=>E(r.value)),D=(m,g)=>{const l=Math.abs(m/g);m=r.value+l/.003*(m<0?-1:1);const s=E(m);n.value=+e.swipeDuration,T(s)},I=()=>{c=!1,n.value=0,_&&(_(),_=null)},d=m=>{if(!x()){if(p.start(m),c){const g=ut(k.value);r.value=Math.min(0,g-C())}n.value=0,i=r.value,v=Date.now(),h=i,_=null}},A=m=>{if(x())return;p.move(m),p.isVertical()&&(c=!0,ke(m,!0));const g=ne(i+p.deltaY.value,-(y()*e.optionHeight),e.optionHeight),l=E(g);l!==$.value&&o("scrollInto",e.options[l]),r.value=g;const s=Date.now();s-v>he&&(v=s,h=g)},N=()=>{if(x())return;const m=r.value-h,g=Date.now()-v;if(g<he&&Math.abs(m)>mt){D(m,g);return}const s=E(r.value);n.value=be,T(s),setTimeout(()=>{c=!1},0)},K=()=>{const m={height:`${e.optionHeight}px`};return e.options.map((g,l)=>{const s=g[e.fields.text],{disabled:f}=g,L=g[e.fields.value],R={role:"button",style:m,tabindex:f?-1:0,class:[te("item",{disabled:f,selected:L===e.value}),g.className],onClick:()=>w(l)},Ee={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:s};return a("li",R,[t.option?t.option(g,l):a("div",Ee,null)])})};return ae(Se),Ce({stopMomentum:I}),Je(()=>{const m=c?Math.floor(-r.value/e.optionHeight):e.options.findIndex(s=>s[e.fields.value]===e.value),g=G(e.options,m),l=-g*e.optionHeight;c&&g<m&&I(),r.value=l}),_e("touchmove",A,{target:b}),()=>a("div",{ref:b,class:te(),onTouchstartPassive:d,onTouchend:N,onTouchcancel:N},[a("ul",{ref:k,style:{transform:`translate3d(0, ${r.value+C()}px, 0)`,transitionDuration:`${n.value}ms`,transitionProperty:n.value?"all":"none"},class:te("wrapper"),onTransitionend:I},[K()])])}});const[ft]=M("picker-toolbar"),Q={title:String,cancelButtonText:String,confirmButtonText:String},pt=["cancel","confirm","title","toolbar"],gt=Object.keys(Q);var bt=z({name:ft,props:Q,emits:["confirm","cancel"],setup(e,{emit:o,slots:t}){const c=()=>{if(t.title)return t.title();if(e.title)return a("div",{class:[P("title"),"van-ellipsis"]},[e.title])},i=()=>o("cancel"),v=()=>o("confirm"),h=()=>{var b;const k=(b=e.cancelButtonText)!=null?b:pe("cancel");if(!(!t.cancel&&!k))return a("button",{type:"button",class:[P("cancel"),de],onClick:i},[t.cancel?t.cancel():k])},_=()=>{var b;const k=(b=e.confirmButtonText)!=null?b:pe("confirm");if(!(!t.confirm&&!k))return a("button",{type:"button",class:[P("confirm"),de],onClick:v},[t.confirm?t.confirm():k])};return()=>a("div",{class:P("toolbar")},[t.toolbar?t.toolbar():[h(),c(),_()]])}});const[ht]=M("picker-group"),_t=Symbol(ht);B({tabs:j(),activeTab:F(0),nextStepText:String,showToolbar:J},Q);const kt=B({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:F(44),showToolbar:J,swipeDuration:F(1e3),visibleOptionNum:F(6)},Q),xt=B({},kt,{columns:j(),modelValue:j(),toolbarPosition:Ne("top"),columnsFieldNames:Object});var yt=z({name:it,props:xt,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:o,slots:t}){const c=V(),i=V(e.modelValue.slice(0)),{parent:v}=ae(_t),{children:h,linkChildren:_}=xe(Se);_();const b=O(()=>dt(e.columnsFieldNames)),k=O(()=>Ue(e.optionHeight)),r=O(()=>rt(e.columns,b.value)),n=O(()=>{const{columns:l}=e;switch(r.value){case"multiple":return l;case"cascade":return ct(l,b.value,i);default:return[l]}}),p=O(()=>n.value.some(l=>l.length)),y=O(()=>n.value.map((l,s)=>le(l,i.value[s],b.value))),C=O(()=>n.value.map((l,s)=>l.findIndex(f=>f[b.value.value]===i.value[s]))),T=(l,s)=>{if(i.value[l]!==s){const f=i.value.slice(0);f[l]=s,i.value=f}},x=()=>({selectedValues:i.value.slice(0),selectedOptions:y.value,selectedIndexes:C.value}),w=(l,s)=>{T(s,l),r.value==="cascade"&&i.value.forEach((f,L)=>{const R=n.value[L];ge(R,f,b.value)||T(L,R.length?R[0][b.value.value]:void 0)}),ve(()=>{o("change",B({columnIndex:s},x()))})},E=(l,s)=>{const f={columnIndex:s,currentOption:l};o("clickOption",B(x(),f)),o("scrollInto",f)},$=()=>{h.forEach(s=>s.stopMomentum());const l=x();return ve(()=>{const s=x();o("confirm",s)}),l},D=()=>o("cancel",x()),I=()=>n.value.map((l,s)=>a(vt,{value:i.value[s],fields:b.value,options:l,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:k.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:f=>w(f,s),onClickOption:f=>E(f,s),onScrollInto:f=>{o("scrollInto",{currentOption:f,columnIndex:s})}},{option:t.option})),d=l=>{if(p.value){const s={height:`${k.value}px`},f={backgroundSize:`100% ${(l-k.value)/2}px`};return[a("div",{class:P("mask"),style:f},null),a("div",{class:[Re,P("frame")],style:s},null)]}},A=()=>{const l=k.value*+e.visibleOptionNum,s={height:`${l}px`};return!e.loading&&!p.value&&t.empty?t.empty():a("div",{ref:c,class:P("columns"),style:s},[I(),d(l)])},N=()=>{if(e.showToolbar&&!v)return a(bt,Te(me(e,gt),{onConfirm:$,onCancel:D}),me(t,pt))},K=l=>{l.forEach((s,f)=>{s.length&&!ge(s,i.value[f],b.value)&&T(f,Oe(s)[b.value.value])})};X(n,l=>K(l),{immediate:!0});let m;return X(()=>e.modelValue,l=>{!W(l,i.value)&&!W(l,m)&&(i.value=l.slice(0),m=l.slice(0)),e.modelValue.length===0&&K(n.value)},{deep:!0}),X(i,l=>{W(l,e.modelValue)||(m=l.slice(0),o("update:modelValue",m))},{immediate:!0}),_e("touchmove",ke,{target:c}),Ce({confirm:$,getSelectedOptions:()=>y.value}),()=>{var l,s;return a("div",{class:P()},[e.toolbarPosition==="top"?N():null,e.loading?a(nt,{class:P("loading")},null):null,(l=t["columns-top"])==null?void 0:l.call(t),A(),(s=t["columns-bottom"])==null?void 0:s.call(t),e.toolbarPosition==="bottom"?N():null])}}});const Tt=se(yt),[Pe,Ct]=M("grid"),Ot={square:Boolean,center:J,border:J,gutter:H,reverse:Boolean,iconSize:H,direction:String,clickable:Boolean,columnNum:F(4)},Ve=Symbol(Pe);var wt=z({name:Pe,props:Ot,setup(e,{slots:o}){const{linkChildren:t}=xe(Ve);return t({props:e}),()=>{var c;return a("div",{style:{paddingLeft:oe(e.gutter)},class:[Ct(),{[Fe]:e.border&&!e.gutter}]},[(c=o.default)==null?void 0:c.call(o)])}}});const St=se(wt),[Pt,Y]=M("grid-item"),Vt=B({},Ke,{dot:Boolean,text:String,icon:String,badge:H,iconColor:String,iconPrefix:String,badgeProps:Object});var Et=z({name:Pt,props:Vt,setup(e,{slots:o}){const{parent:t,index:c}=ae(Ve),i=ze();if(!t)return;const v=O(()=>{const{square:r,gutter:n,columnNum:p}=t.props,y=`${100/+p}%`,C={flexBasis:y};if(r)C.paddingTop=y;else if(n){const T=oe(n);C.paddingRight=T,c.value>=+p&&(C.marginTop=T)}return C}),h=O(()=>{const{square:r,gutter:n}=t.props;if(r&&n){const p=oe(n);return{right:p,bottom:p,height:"auto"}}}),_=()=>{if(o.icon)return a(Le,Te({dot:e.dot,content:e.badge},e.badgeProps),{default:o.icon});if(e.icon)return a(ye,{dot:e.dot,name:e.icon,size:t.props.iconSize,badge:e.badge,class:Y("icon"),color:e.iconColor,badgeProps:e.badgeProps,classPrefix:e.iconPrefix},null)},b=()=>{if(o.text)return o.text();if(e.text)return a("span",{class:Y("text")},[e.text])},k=()=>o.default?o.default():[_(),b()];return()=>{const{center:r,border:n,square:p,gutter:y,reverse:C,direction:T,clickable:x}=t.props,w=[Y("content",[T,{center:r,square:p,reverse:C,clickable:x,surround:n&&y}]),{[Ae]:n}];return a("div",{class:[Y({square:p})],style:v.value},[a("div",{role:x?"button":void 0,class:w,style:h.value,tabindex:x?0:void 0,onClick:i},[k()])])}}});const It=se(Et),Bt={class:"page home-page"},$t={class:"welcome-card"},Dt={class:"kpi-grid"},Ht={class:"kpi-card blue"},Mt={class:"kpi-icon"},Nt={class:"kpi-value"},Rt={class:"kpi-card green"},Ut={class:"kpi-icon"},Ft={class:"kpi-value"},zt={class:"kpi-card orange"},At={class:"kpi-icon"},Kt={class:"kpi-value"},Lt={class:"kpi-card gold"},qt={class:"kpi-icon"},Yt={class:"kpi-value"},Gt={class:"card"},jt={class:"card-title"},Jt={class:"card"},Qt={class:"card-title"},Wt=["src"],Xt={class:"popup-header"},Zt={class:"popup-footer"},en={__name:"Home",setup(e){const o=je(),t=O(()=>o.stats),c=V(!1),i=V(!1),v=V({name:"",phone:"",email:"",company:"",membership:"",membershipText:""}),h=[{text:"普通會員",value:"normal"},{text:"銀級會員",value:"silver"},{text:"金級會員",value:"gold"},{text:"企業會員",value:"enterprise"}],_=O(()=>o.members.filter(r=>r.status==="pending"||r.status==="expired").slice(0,3).map(r=>ue(ce({},r),{action:r.status==="pending"?"新會員申請審核":"會籍已過期，待續費",statusText:o.statusTypes[r.status].label}))),b=({selectedOptions:r})=>{v.value.membership=r[0].value,v.value.membershipText=r[0].text,i.value=!1},k=()=>{st("會員新增成功"),c.value=!1,v.value={name:"",phone:"",email:"",company:"",membership:"",membershipText:""}};return(r,n)=>{const p=ye,y=It,C=St,T=qe,x=Ge,w=Ye,E=ot,$=at,D=lt,I=Tt;return ee(),fe("div",Bt,[u("div",$t,[n[12]||(n[12]=u("div",{class:"welcome-info"},[u("h1",null,"會籍管理系統"),u("p",null,"歡迎回來，管理員")],-1)),a(p,{name:"bell",size:"24",color:"#fff",badge:"3"})]),u("div",Dt,[u("div",Ht,[u("div",Mt,[a(p,{name:"friends-o",size:"20"})]),n[13]||(n[13]=u("div",{class:"kpi-label"},"會員總數",-1)),u("div",Nt,U(t.value.total),1)]),u("div",Rt,[u("div",Ut,[a(p,{name:"passed",size:"20"})]),n[14]||(n[14]=u("div",{class:"kpi-label"},"有效會員",-1)),u("div",Ft,U(t.value.active),1)]),u("div",zt,[u("div",At,[a(p,{name:"clock-o",size:"20"})]),n[15]||(n[15]=u("div",{class:"kpi-label"},"待審核",-1)),u("div",Kt,U(t.value.pending),1)]),u("div",Lt,[u("div",qt,[a(p,{name:"warning-o",size:"20"})]),n[16]||(n[16]=u("div",{class:"kpi-label"},"已過期",-1)),u("div",Yt,U(t.value.expired),1)])]),u("div",Gt,[u("div",jt,[a(p,{name:"apps-o"}),n[17]||(n[17]=Z(" 快捷操作",-1))]),a(C,{"column-num":4,border:!1},{default:S(()=>[a(y,{icon:"add-o",text:"新增會員",onClick:n[0]||(n[0]=d=>c.value=!0)}),a(y,{icon:"scan",text:"掃碼簽到"}),a(y,{icon:"bill-o",text:"收款確認",to:"/admin/payments"}),a(y,{icon:"chart-trending-o",text:"數據報表"})]),_:1})]),u("div",Jt,[u("div",Qt,[a(p,{name:"todo-list-o"}),n[18]||(n[18]=Z(" 待處理事項 ",-1)),u("span",{class:"card-more",onClick:n[1]||(n[1]=d=>r.$router.push("/admin/members"))},"查看全部")]),a(x,{border:!1},{default:S(()=>[(ee(!0),fe(We,null,Xe(_.value,d=>(ee(),Ze(T,{key:d.id,title:d.name,label:d.action,"is-link":"",onClick:A=>r.$router.push(`/admin/member/${d.id}`)},{icon:S(()=>[u("img",{src:d.avatar,class:"cell-avatar"},null,8,Wt)]),value:S(()=>[u("span",{class:et(["status-tag",d.status])},U(d.statusText),3)]),_:2},1032,["title","label","onClick"]))),128))]),_:1})]),a(D,{show:c.value,"onUpdate:show":n[9]||(n[9]=d=>c.value=d),position:"bottom",round:"",style:{height:"70%"}},{default:S(()=>[u("div",Xt,[n[19]||(n[19]=u("span",null,"新增會員",-1)),a(p,{name:"cross",onClick:n[2]||(n[2]=d=>c.value=!1)})]),a($,{onSubmit:k},{default:S(()=>[a(x,{inset:""},{default:S(()=>[a(w,{modelValue:v.value.name,"onUpdate:modelValue":n[3]||(n[3]=d=>v.value.name=d),label:"姓名",placeholder:"請輸入會員姓名",rules:[{required:!0}]},null,8,["modelValue"]),a(w,{modelValue:v.value.phone,"onUpdate:modelValue":n[4]||(n[4]=d=>v.value.phone=d),label:"電話",type:"tel",placeholder:"請輸入聯絡電話",rules:[{required:!0}]},null,8,["modelValue"]),a(w,{modelValue:v.value.email,"onUpdate:modelValue":n[5]||(n[5]=d=>v.value.email=d),label:"郵箱",type:"email",placeholder:"請輸入電子郵件"},null,8,["modelValue"]),a(w,{modelValue:v.value.company,"onUpdate:modelValue":n[6]||(n[6]=d=>v.value.company=d),label:"公司",placeholder:"請輸入公司名稱"},null,8,["modelValue"]),a(w,{modelValue:v.value.membershipText,"onUpdate:modelValue":n[7]||(n[7]=d=>v.value.membershipText=d),"is-link":"",readonly:"",label:"會籍類型",placeholder:"請選擇會籍類型",onClick:n[8]||(n[8]=d=>i.value=!0)},null,8,["modelValue"])]),_:1}),u("div",Zt,[a(E,{round:"",block:"",type:"primary","native-type":"submit"},{default:S(()=>[...n[20]||(n[20]=[Z("確認新增",-1)])]),_:1})])]),_:1})]),_:1},8,["show"]),a(D,{show:i.value,"onUpdate:show":n[11]||(n[11]=d=>i.value=d),position:"bottom"},{default:S(()=>[a(I,{columns:h,onConfirm:b,onCancel:n[10]||(n[10]=d=>i.value=!1)})]),_:1},8,["show"])])}}},bn=Qe(en,[["__scopeId","data-v-c4e3eb06"]]);export{bn as default};
