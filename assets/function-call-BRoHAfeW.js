import{g as I,h as v,A as B,Q as T,a as l,s as b,R as z,j as M,x as N,b as j}from"./index-BCHZ0ZDp.js";import{n as g,j as h,p as L,I as A,i as U,g as y,a8 as E,c as V,f as k,$ as q,A as D}from"./index-M2RwkOmD.js";import{L as H,u as Q}from"./use-touch-BDVozqpq.js";import{P as R}from"./index-k7JcCHgp.js";let f=0;function _(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[$,c]=V("toast"),F=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],G={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:g,iconSize:g,duration:E(2e3),position:y("middle"),teleport:[String,Object],wordBreak:String,className:h,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:h,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:g};var J=I({name:$,props:G,emits:["update:show"],setup(e,{emit:t,slots:n}){let i,o=!1;const r=()=>{const s=e.show&&e.forbidClick;o!==s&&(o=s,_(o))},u=s=>t("update:show",s),p=()=>{e.closeOnClick&&u(!1)},d=()=>clearTimeout(i),O=()=>{const{icon:s,type:a,iconSize:C,iconPrefix:x,loadingType:P}=e;if(s||a==="success"||a==="fail")return l(A,{name:s||a,size:C,class:c("icon"),classPrefix:x},null);if(a==="loading")return l(H,{class:c("loading"),size:C,type:P},null)},S=()=>{const{type:s,message:a}=e;if(n.message)return l("div",{class:c("text")},[n.message()]);if(U(a)&&a!=="")return s==="html"?l("div",{key:0,class:c("text"),innerHTML:String(a)},null):l("div",{class:c("text")},[a])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{d(),e.show&&e.duration>0&&(i=setTimeout(()=>{u(!1)},e.duration))}),B(r),T(r),()=>l(R,b({class:[c([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:p,onClosed:d,"onUpdate:show":u},L(e,F)),{default:()=>[O(),S()]})}});function K(){const e=M({show:!1}),t=o=>{e.show=o},n=o=>{k(e,o,{transitionAppear:!0}),t(!0)},i=()=>t(!1);return Q({open:n,close:i,toggle:t}),{open:n,close:i,state:e,toggle:t}}function W(e){const t=z(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const X={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let m=[],Y=!1,w=k({},X);const Z=new Map;function ee(e){return D(e)?e:{message:e}}function te(){const{instance:e}=W({setup(){const t=j(""),{open:n,state:i,close:o,toggle:r}=K(),u=()=>{},p=()=>l(J,b(i,{onClosed:u,"onUpdate:show":r}),null);return v(t,d=>{i.message=d}),N().render=p,{open:n,close:o,message:t}}});return e}function ne(){if(!m.length||Y){const e=te();m.push(e)}return m[m.length-1]}function ce(e={}){if(!q)return{};const t=ne(),n=ee(e);return t.open(k({},w,Z.get(n.type||w.type),n)),t}export{ce as a,W as m,J as s,K as u};
