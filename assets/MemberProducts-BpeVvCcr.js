var ie=Object.defineProperty,re=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var K=(o,s,i)=>s in o?ie(o,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[s]=i,X=(o,s)=>{for(var i in s||(s={}))ce.call(s,i)&&K(o,i,s[i]);if(j)for(var i of j(s))de.call(s,i)&&K(o,i,s[i]);return o},Y=(o,s)=>re(o,ue(s));var J=(o,s,i)=>new Promise((c,v)=>{var u=p=>{try{h(i.next(p))}catch(y){v(y)}},m=p=>{try{h(i.throw(p))}catch(y){v(y)}},h=p=>p.done?c(p.value):Promise.resolve(p.value).then(u,m);h((i=i.apply(o,s)).next())});import{f as pe,n as L,g as me,h as fe,c as O,w as q,j as ve,p as ge,k as he,l as ye,u as _e,q as ke,s as be,m as we,i as Q,b as Ce,I as Ve}from"./index-CDxJsEB3.js";/* empty css              *//* empty css              *//* empty css              */import{P as Te}from"./index-DYRy_5y9.js";/* empty css              */import{C as xe}from"./index-WPZnnyNE.js";import{s as Pe,c as $e}from"./index-BY2WvT1f.js";import{C as Se}from"./index-DYpDMpii.js";import{F as Be}from"./index-BvfrUZFn.js";import{E as Ee}from"./index-Be7OMIoQ.js";import{T as Ie}from"./index-BMJCaU96.js";/* empty css              */import{N as Fe}from"./index-CvtmVt3d.js";import{h as A,w as Ne,a as n,s as Ue,r as b,j as We,m as Z,_ as ze,c as E,k as _,g as k,b as d,F as ee,l as De,e as z,q as te,o as w,t as R}from"./index-CYNoNFn7.js";import{u as Re,a as Me}from"./use-touch-CoLEfbaL.js";import{c as Le}from"./interceptor-SwkErRcB.js";import{F as Oe}from"./index-C9l5sb2Z.js";import{B as qe}from"./index-BTb55al6.js";import{P as Ae}from"./index--jaruAqB.js";import{a as D}from"./function-call-B8E4hwbK.js";import{a as He}from"./function-call-CrsSUfte.js";import"./use-route-5Jp667pb.js";import"./use-id-zzKfe8rB.js";import"./use-placeholder-CGcD_-36.js";const[oe,Ge]=O("radio-group"),je={shape:String,disabled:Boolean,iconSize:L,direction:String,modelValue:pe,checkedColor:String},ae=Symbol(oe);var Ke=A({name:oe,props:je,emits:["change","update:modelValue"],setup(o,{emit:s,slots:i}){const{linkChildren:c}=fe(ae),v=u=>s("update:modelValue",u);return Ne(()=>o.modelValue,u=>s("change",u)),c({props:o,updateValue:v}),me(()=>o.modelValue),()=>{var u;return n("div",{class:Ge([o.direction]),role:"radiogroup"},[(u=i.default)==null?void 0:u.call(i)])}}});const Xe=q(Ke),Ye=he({},$e,{shape:String}),[Je,Qe]=O("radio");var Ze=A({name:Je,props:Ye,emits:["update:modelValue"],setup(o,{emit:s,slots:i}){const{parent:c}=ve(ae),v=()=>(c?c.props.modelValue:o.modelValue)===o.name,u=()=>{c?c.updateValue(o.name):s("update:modelValue",o.name)};return()=>n(Pe,Ue({bem:Qe,role:"radio",parent:c,checked:v(),onToggle:u},o),ge(i,["default","icon"]))}});const et=q(Ze),[tt,M]=O("swipe-cell"),ot={name:we(""),disabled:Boolean,leftWidth:L,rightWidth:L,beforeClose:Function,stopPropagation:Boolean};var at=A({name:tt,props:ot,emits:["open","close","click"],setup(o,{emit:s,slots:i}){let c,v,u,m;const h=b(),p=b(),y=b(),t=We({offset:0,dragging:!1}),V=Me(),x=l=>l.value?Ce(l).width:0,P=Z(()=>Q(o.leftWidth)?+o.leftWidth:x(p)),$=Z(()=>Q(o.rightWidth)?+o.rightWidth:x(y)),I=l=>{t.offset=l==="left"?P.value:-$.value,c||(c=!0,s("open",{name:o.name,position:l}))},S=l=>{t.offset=0,c&&(c=!1,s("close",{name:o.name,position:l}))},r=l=>{const f=Math.abs(t.offset),g=.15,B=c?1-g:g,W=l==="left"?P.value:$.value;W&&f>W*B?I(l):S(l)},e=l=>{o.disabled||(u=t.offset,V.start(l))},F=l=>{if(o.disabled)return;const{deltaX:f}=V;V.move(l),V.isHorizontal()&&(v=!0,t.dragging=!0,(!c||f.value*u<0)&&ke(l,o.stopPropagation),t.offset=be(f.value+u,-$.value,P.value))},T=()=>{t.dragging&&(t.dragging=!1,r(t.offset>0?"left":"right"),setTimeout(()=>{v=!1},0))},C=(l="outside",f)=>{m||(s("click",l),c&&!v&&(m=!0,Le(o.beforeClose,{args:[{event:f,name:o.name,position:l}],done:()=>{m=!1,S(l)},canceled:()=>m=!1,error:()=>m=!1})))},N=l=>f=>{(v||c)&&f.stopPropagation(),!v&&C(l,f)},U=(l,f)=>{const g=i[l];if(g)return n("div",{ref:f,class:M(l),onClick:N(l)},[g()])};return Re({open:I,close:S}),ye(h,l=>C("outside",l),{eventName:"touchstart"}),_e("touchmove",F,{target:h}),()=>{var l;const f={transform:`translate3d(${t.offset}px, 0, 0)`,transitionDuration:t.dragging?"0s":".6s"};return n("div",{ref:h,class:M(),onClick:N("cell"),onTouchstartPassive:e,onTouchend:T,onTouchcancel:T},[n("div",{class:M("wrapper"),style:f},[U("left",p),(l=i.default)==null?void 0:l.call(i),U("right",y)])])}}});const lt=q(at),nt={class:"my-products-page"},st={key:0,class:"locked-screen"},it={class:"locked-icon"},rt={key:0,class:"product-list"},ut=["src"],ct={class:"form-popup"},dt={class:"form-header"},pt={class:"form-body"},mt={class:"form-footer"},ft={__name:"MemberProducts",setup(o){const s=b(!1),i=()=>{D({message:"請聯繫管理員開通此功能"})},c={food:"美食",service:"服務",handmade:"手作",retail:"零售",other:"其他"},v=[{text:"美食",value:"food"},{text:"服務",value:"service"},{text:"手作",value:"handmade"},{text:"零售",value:"retail"},{text:"其他",value:"other"}],u=b([{id:1,title:"手工曲奇餅乾禮盒",category:"food",price:120,priceType:"fixed",images:["https://images.unsplash.com/photo-1558961363-fa8fdf82db35?w=400&h=400&fit=crop"],description:"純手工製作，採用進口黃油。",phone:"6612 3456",wechat:"daming_cookies",status:"active"},{id:4,title:"自家製辣椒醬",category:"food",price:45,priceType:"fixed",images:["https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=400&h=400&fit=crop"],description:"秘製配方，香辣可口。",phone:"6612 3456",wechat:"daming_cookies",status:"active"}]),m=b(!1),h=b(!1),p=b(!1),y=b(null),t=b({title:"",category:"",categoryText:"",priceType:"fixed",price:"",description:"",phone:"",wechat:""}),V=()=>{t.value={title:"",category:"",categoryText:"",priceType:"fixed",price:"",description:"",phone:"",wechat:""}},x=()=>{p.value=!1,y.value=null,V(),m.value=!0},P=r=>{p.value=!0,y.value=r.id,t.value={title:r.title,category:r.category,categoryText:c[r.category],priceType:r.priceType,price:String(r.price||""),description:r.description,phone:r.phone||"",wechat:r.wechat||""},m.value=!0},$=r=>J(null,null,function*(){try{yield He({title:"確認刪除",message:`確定要刪除「${r.title}」嗎？`}),u.value=u.value.filter(e=>e.id!==r.id),D({type:"success",message:"已刪除"})}catch(e){}}),I=({selectedOptions:r})=>{t.value.category=r[0].value,t.value.categoryText=r[0].text,h.value=!1},S=()=>{if(p.value){const r=u.value.findIndex(e=>e.id===y.value);r!==-1&&(u.value[r]=Y(X({},u.value[r]),{title:t.value.title,category:t.value.category,priceType:t.value.priceType,price:parseInt(t.value.price)||0,description:t.value.description,phone:t.value.phone,wechat:t.value.wechat})),D({type:"success",message:"修改成功"})}else u.value.push({id:Date.now(),title:t.value.title,category:t.value.category,priceType:t.value.priceType,price:parseInt(t.value.price)||0,description:t.value.description,phone:t.value.phone,wechat:t.value.wechat,images:["https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=400&h=400&fit=crop"],status:"active"}),D({type:"success",message:"新增成功"});m.value=!1};return(r,e)=>{const F=Fe,T=Ve,C=qe,N=Ie,U=Se,l=lt,f=Ee,g=Be,B=et,W=Xe,le=xe,ne=Oe,H=Ae,se=Te;return w(),E("div",nt,[n(F,{title:"我的產品","left-arrow":"",onClickLeft:e[0]||(e[0]=a=>r.$router.back())}),s.value?(w(),E(ee,{key:1},[u.value.length>0?(w(),E("div",rt,[(w(!0),E(ee,null,De(u.value,a=>(w(),z(l,{key:a.id},{right:d(()=>[n(C,{square:"",type:"primary",text:"編輯",onClick:G=>P(a)},null,8,["onClick"]),n(C,{square:"",type:"danger",text:"刪除",onClick:G=>$(a)},null,8,["onClick"])]),default:d(()=>[n(U,{title:a.title,label:`${c[a.category]} · ${a.priceType==="fixed"?"MOP$ "+a.price:a.priceType==="negotiable"?"面議":"免費"}`,"is-link":"",onClick:G=>r.$router.push(`/m/product/${a.id}`)},{icon:d(()=>[_("img",{src:a.images[0],class:"product-thumb"},null,8,ut)]),value:d(()=>[n(N,{type:a.status==="active"?"success":"default",plain:""},{default:d(()=>[k(R(a.status==="active"?"上架中":"已下架"),1)]),_:2},1032,["type"])]),_:2},1032,["title","label","onClick"])]),_:2},1024))),128))])):(w(),z(f,{key:1,description:"還沒有產品，點右上角「+」新增"},{default:d(()=>[n(C,{type:"primary",round:"",size:"small",icon:"plus",onClick:x},{default:d(()=>[...e[17]||(e[17]=[k("新增產品",-1)])]),_:1})]),_:1}))],64)):(w(),E("div",st,[_("div",it,[n(T,{name:"lock",size:"60",color:"#cbd5e0"})]),e[15]||(e[15]=_("h3",null,"功能未開通",-1)),e[16]||(e[16]=_("p",null,[k("此功能需要管理員授權後方可使用。"),_("br"),k("如需開通，請聯繫管理員。")],-1)),n(C,{type:"primary",plain:"",round:"",size:"small",icon:"service-o",onClick:i},{default:d(()=>[...e[14]||(e[14]=[k(" 聯繫管理員 ",-1)])]),_:1})])),s.value?(w(),z(F,{key:2,title:"我的產品","left-arrow":"",onClickLeft:e[1]||(e[1]=a=>r.$router.back()),style:{display:"none"}},{right:d(()=>[n(T,{name:"plus",size:"20",onClick:x})]),_:1})):te("",!0),n(H,{show:m.value,"onUpdate:show":e[11]||(e[11]=a=>m.value=a),position:"bottom",round:"",style:{height:"85%"}},{default:d(()=>[_("div",ct,[_("div",dt,[_("span",null,R(p.value?"編輯產品":"新增產品"),1),n(T,{name:"cross",onClick:e[2]||(e[2]=a=>m.value=!1)})]),_("div",pt,[n(ne,{onSubmit:S},{default:d(()=>[n(le,{inset:""},{default:d(()=>[n(g,{modelValue:t.value.title,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.title=a),label:"名稱",placeholder:"產品或服務名稱",rules:[{required:!0,message:"請填寫名稱"}]},null,8,["modelValue"]),n(g,{modelValue:t.value.categoryText,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.categoryText=a),"is-link":"",readonly:"",label:"分類",placeholder:"選擇分類",onClick:e[5]||(e[5]=a=>h.value=!0)},null,8,["modelValue"]),n(g,{name:"priceType",label:"定價方式"},{input:d(()=>[n(W,{modelValue:t.value.priceType,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.priceType=a),direction:"horizontal"},{default:d(()=>[n(B,{name:"fixed"},{default:d(()=>[...e[18]||(e[18]=[k("固定價",-1)])]),_:1}),n(B,{name:"negotiable"},{default:d(()=>[...e[19]||(e[19]=[k("面議",-1)])]),_:1}),n(B,{name:"free"},{default:d(()=>[...e[20]||(e[20]=[k("免費",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t.value.priceType==="fixed"?(w(),z(g,{key:0,modelValue:t.value.price,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.price=a),type:"digit",label:"價格",placeholder:"MOP$"},{button:d(()=>[...e[21]||(e[21]=[k("MOP",-1)])]),_:1},8,["modelValue"])):te("",!0),n(g,{modelValue:t.value.description,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.description=a),label:"描述",type:"textarea",placeholder:"產品或服務的詳細介紹",rows:"4",autosize:""},null,8,["modelValue"]),n(g,{modelValue:t.value.phone,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.phone=a),label:"電話",type:"tel",placeholder:"聯繫電話"},null,8,["modelValue"]),n(g,{modelValue:t.value.wechat,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.wechat=a),label:"微信",placeholder:"微信號（選填）"},null,8,["modelValue"])]),_:1}),_("div",mt,[n(C,{round:"",block:"",type:"primary","native-type":"submit"},{default:d(()=>[k(R(p.value?"保存修改":"確認新增"),1)]),_:1})])]),_:1})])])]),_:1},8,["show"]),n(H,{show:h.value,"onUpdate:show":e[13]||(e[13]=a=>h.value=a),position:"bottom"},{default:d(()=>[n(se,{columns:v,onConfirm:I,onCancel:e[12]||(e[12]=a=>h.value=!1)})]),_:1},8,["show"])])}}},Lt=ze(ft,[["__scopeId","data-v-abeaf697"]]);export{Lt as default};
