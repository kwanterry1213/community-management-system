var ae=Object.defineProperty,le=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var K=(a,i,r)=>i in a?ae(a,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[i]=r,X=(a,i)=>{for(var r in i||(i={}))se.call(i,r)&&K(a,r,i[r]);if(j)for(var r of j(i))ie.call(i,r)&&K(a,r,i[r]);return a},Y=(a,i)=>le(a,ne(i));var J=(a,i,r)=>new Promise((s,d)=>{var u=e=>{try{g(r.next(e))}catch(y){d(y)}},f=e=>{try{g(r.throw(e))}catch(y){d(y)}},g=e=>e.done?s(e.value):Promise.resolve(e.value).then(u,f);g((r=r.apply(a,i)).next())});import{f as re,n as q,g as ce,h as ue,c as z,w as H,j as de,p as pe,k as me,l as fe,u as ve,q as ge,s as he,m as ye,i as Q,b as _e,I as we}from"./index-Dfity5xd.js";/* empty css              *//* empty css              *//* empty css              */import{P as ke}from"./index-CCB-BakN.js";/* empty css              */import{C as be}from"./index-3d00WeVJ.js";import{s as Ce,c as Ve}from"./index-Bp5O9fns.js";import{C as Te}from"./index-C36H5uNu.js";import{F as xe}from"./index-BB34gc-r.js";import{E as Pe}from"./index-CgglalFi.js";/* empty css              */import{T as $e}from"./index-C21IevBS.js";import{N as Se}from"./index-BFcT8aSg.js";import{h as L,w as Be,a as n,s as Ee,r as h,j as Ie,m as Z,_ as Fe,c as W,b as m,F as Ne,l as Ue,e as D,o as b,g as C,t as R,k as V,q as We}from"./index-BbGaNgdP.js";import{u as De,a as Re}from"./use-touch-DEAjym_J.js";import{c as Me}from"./interceptor-CdnpexGN.js";import{F as Oe}from"./index-97eEep2_.js";import{P as qe}from"./index-IUR9Pz2a.js";import{B as ze}from"./index-B48d-3rc.js";import{a as He}from"./function-call-BXlfT8oB.js";import{a as M}from"./function-call-CXY8ivfZ.js";import"./use-route-B4kzwgeO.js";import"./use-id-BxO-C31K.js";import"./use-placeholder-BB8Cr55d.js";const[ee,Le]=z("radio-group"),Ae={shape:String,disabled:Boolean,iconSize:q,direction:String,modelValue:re,checkedColor:String},te=Symbol(ee);var Ge=L({name:ee,props:Ae,emits:["change","update:modelValue"],setup(a,{emit:i,slots:r}){const{linkChildren:s}=ue(te),d=u=>i("update:modelValue",u);return Be(()=>a.modelValue,u=>i("change",u)),s({props:a,updateValue:d}),ce(()=>a.modelValue),()=>{var u;return n("div",{class:Le([a.direction]),role:"radiogroup"},[(u=r.default)==null?void 0:u.call(r)])}}});const je=H(Ge),Ke=me({},Ve,{shape:String}),[Xe,Ye]=z("radio");var Je=L({name:Xe,props:Ke,emits:["update:modelValue"],setup(a,{emit:i,slots:r}){const{parent:s}=de(te),d=()=>(s?s.props.modelValue:a.modelValue)===a.name,u=()=>{s?s.updateValue(a.name):i("update:modelValue",a.name)};return()=>n(Ce,Ee({bem:Ye,role:"radio",parent:s,checked:d(),onToggle:u},a),pe(r,["default","icon"]))}});const Qe=H(Je),[Ze,O]=z("swipe-cell"),et={name:ye(""),disabled:Boolean,leftWidth:q,rightWidth:q,beforeClose:Function,stopPropagation:Boolean};var tt=L({name:Ze,props:et,emits:["open","close","click"],setup(a,{emit:i,slots:r}){let s,d,u,f;const g=h(),e=h(),y=h(),v=Ie({offset:0,dragging:!1}),w=Re(),P=o=>o.value?_e(o).width:0,T=Z(()=>Q(a.leftWidth)?+a.leftWidth:P(e)),x=Z(()=>Q(a.rightWidth)?+a.rightWidth:P(y)),c=o=>{v.offset=o==="left"?T.value:-x.value,s||(s=!0,i("open",{name:a.name,position:o}))},t=o=>{v.offset=0,s&&(s=!1,i("close",{name:a.name,position:o}))},$=o=>{const p=Math.abs(v.offset),_=.15,U=s?1-_:_,I=o==="left"?T.value:x.value;I&&p>I*U?c(o):t(o)},F=o=>{a.disabled||(u=v.offset,w.start(o))},N=o=>{if(a.disabled)return;const{deltaX:p}=w;w.move(o),w.isHorizontal()&&(d=!0,v.dragging=!0,(!s||p.value*u<0)&&ge(o,a.stopPropagation),v.offset=he(p.value+u,-x.value,T.value))},S=()=>{v.dragging&&(v.dragging=!1,$(v.offset>0?"left":"right"),setTimeout(()=>{d=!1},0))},k=(o="outside",p)=>{f||(i("click",o),s&&!d&&(f=!0,Me(a.beforeClose,{args:[{event:p,name:a.name,position:o}],done:()=>{f=!1,t(o)},canceled:()=>f=!1,error:()=>f=!1})))},B=o=>p=>{(d||s)&&p.stopPropagation(),!d&&k(o,p)},E=(o,p)=>{const _=r[o];if(_)return n("div",{ref:p,class:O(o),onClick:B(o)},[_()])};return De({open:c,close:t}),fe(g,o=>k("outside",o),{eventName:"touchstart"}),ve("touchmove",N,{target:g}),()=>{var o;const p={transform:`translate3d(${v.offset}px, 0, 0)`,transitionDuration:v.dragging?"0s":".6s"};return n("div",{ref:g,class:O(),onClick:B("cell"),onTouchstartPassive:F,onTouchend:S,onTouchcancel:S},[n("div",{class:O("wrapper"),style:p},[E("left",e),(o=r.default)==null?void 0:o.call(r),E("right",y)])])}}});const ot=H(tt),at={class:"my-products-page"},lt={key:0,class:"product-list"},nt=["src"],st={class:"form-popup"},it={class:"form-header"},rt={class:"form-body"},ct={class:"form-footer"},ut={__name:"MemberProducts",setup(a){const i={food:"美食",service:"服務",handmade:"手作",retail:"零售",other:"其他"},r=[{text:"美食",value:"food"},{text:"服務",value:"service"},{text:"手作",value:"handmade"},{text:"零售",value:"retail"},{text:"其他",value:"other"}],s=h([{id:1,title:"手工曲奇餅乾禮盒",category:"food",price:120,priceType:"fixed",images:["https://images.unsplash.com/photo-1558961363-fa8fdf82db35?w=400&h=400&fit=crop"],description:"純手工製作，採用進口黃油。",phone:"6612 3456",wechat:"daming_cookies",status:"active"},{id:4,title:"自家製辣椒醬",category:"food",price:45,priceType:"fixed",images:["https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=400&h=400&fit=crop"],description:"秘製配方，香辣可口。",phone:"6612 3456",wechat:"daming_cookies",status:"active"}]),d=h(!1),u=h(!1),f=h(!1),g=h(null),e=h({title:"",category:"",categoryText:"",priceType:"fixed",price:"",description:"",phone:"",wechat:""}),y=()=>{e.value={title:"",category:"",categoryText:"",priceType:"fixed",price:"",description:"",phone:"",wechat:""}},v=()=>{f.value=!1,g.value=null,y(),d.value=!0},w=c=>{f.value=!0,g.value=c.id,e.value={title:c.title,category:c.category,categoryText:i[c.category],priceType:c.priceType,price:String(c.price||""),description:c.description,phone:c.phone||"",wechat:c.wechat||""},d.value=!0},P=c=>J(null,null,function*(){try{yield He({title:"確認刪除",message:`確定要刪除「${c.title}」嗎？`}),s.value=s.value.filter(t=>t.id!==c.id),M({type:"success",message:"已刪除"})}catch(t){}}),T=({selectedOptions:c})=>{e.value.category=c[0].value,e.value.categoryText=c[0].text,u.value=!1},x=()=>{if(f.value){const c=s.value.findIndex(t=>t.id===g.value);c!==-1&&(s.value[c]=Y(X({},s.value[c]),{title:e.value.title,category:e.value.category,priceType:e.value.priceType,price:parseInt(e.value.price)||0,description:e.value.description,phone:e.value.phone,wechat:e.value.wechat})),M({type:"success",message:"修改成功"})}else s.value.push({id:Date.now(),title:e.value.title,category:e.value.category,priceType:e.value.priceType,price:parseInt(e.value.price)||0,description:e.value.description,phone:e.value.phone,wechat:e.value.wechat,images:["https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=400&h=400&fit=crop"],status:"active"}),M({type:"success",message:"新增成功"});d.value=!1};return(c,t)=>{const $=we,F=Se,N=$e,S=Te,k=ze,B=ot,E=Pe,o=xe,p=Qe,_=je,U=be,I=Oe,A=qe,oe=ke;return b(),W("div",at,[n(F,{title:"我的產品"},{right:m(()=>[n($,{name:"plus",size:"20",onClick:v})]),_:1}),s.value.length>0?(b(),W("div",lt,[(b(!0),W(Ne,null,Ue(s.value,l=>(b(),D(B,{key:l.id},{right:m(()=>[n(k,{square:"",type:"primary",text:"編輯",onClick:G=>w(l)},null,8,["onClick"]),n(k,{square:"",type:"danger",text:"刪除",onClick:G=>P(l)},null,8,["onClick"])]),default:m(()=>[n(S,{title:l.title,label:`${i[l.category]} · ${l.priceType==="fixed"?"MOP$ "+l.price:l.priceType==="negotiable"?"面議":"免費"}`,"is-link":"",onClick:G=>c.$router.push(`/m/product/${l.id}`)},{icon:m(()=>[V("img",{src:l.images[0],class:"product-thumb"},null,8,nt)]),value:m(()=>[n(N,{type:l.status==="active"?"success":"default",plain:""},{default:m(()=>[C(R(l.status==="active"?"上架中":"已下架"),1)]),_:2},1032,["type"])]),_:2},1032,["title","label","onClick"])]),_:2},1024))),128))])):(b(),D(E,{key:1,description:"還沒有產品，點右上角「+」新增"})),n(A,{show:d.value,"onUpdate:show":t[9]||(t[9]=l=>d.value=l),position:"bottom",round:"",style:{height:"85%"}},{default:m(()=>[V("div",st,[V("div",it,[V("span",null,R(f.value?"編輯產品":"新增產品"),1),n($,{name:"cross",onClick:t[0]||(t[0]=l=>d.value=!1)})]),V("div",rt,[n(I,{onSubmit:x},{default:m(()=>[n(U,{inset:""},{default:m(()=>[n(o,{modelValue:e.value.title,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.title=l),label:"名稱",placeholder:"產品或服務名稱",rules:[{required:!0,message:"請填寫名稱"}]},null,8,["modelValue"]),n(o,{modelValue:e.value.categoryText,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.categoryText=l),"is-link":"",readonly:"",label:"分類",placeholder:"選擇分類",onClick:t[3]||(t[3]=l=>u.value=!0)},null,8,["modelValue"]),n(o,{name:"priceType",label:"定價方式"},{input:m(()=>[n(_,{modelValue:e.value.priceType,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.priceType=l),direction:"horizontal"},{default:m(()=>[n(p,{name:"fixed"},{default:m(()=>[...t[12]||(t[12]=[C("固定價",-1)])]),_:1}),n(p,{name:"negotiable"},{default:m(()=>[...t[13]||(t[13]=[C("面議",-1)])]),_:1}),n(p,{name:"free"},{default:m(()=>[...t[14]||(t[14]=[C("免費",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e.value.priceType==="fixed"?(b(),D(o,{key:0,modelValue:e.value.price,"onUpdate:modelValue":t[5]||(t[5]=l=>e.value.price=l),type:"digit",label:"價格",placeholder:"MOP$"},{button:m(()=>[...t[15]||(t[15]=[C("MOP",-1)])]),_:1},8,["modelValue"])):We("",!0),n(o,{modelValue:e.value.description,"onUpdate:modelValue":t[6]||(t[6]=l=>e.value.description=l),label:"描述",type:"textarea",placeholder:"產品或服務的詳細介紹",rows:"4",autosize:""},null,8,["modelValue"]),n(o,{modelValue:e.value.phone,"onUpdate:modelValue":t[7]||(t[7]=l=>e.value.phone=l),label:"電話",type:"tel",placeholder:"聯繫電話"},null,8,["modelValue"]),n(o,{modelValue:e.value.wechat,"onUpdate:modelValue":t[8]||(t[8]=l=>e.value.wechat=l),label:"微信",placeholder:"微信號（選填）"},null,8,["modelValue"])]),_:1}),V("div",ct,[n(k,{round:"",block:"",type:"primary","native-type":"submit"},{default:m(()=>[C(R(f.value?"保存修改":"確認新增"),1)]),_:1})])]),_:1})])])]),_:1},8,["show"]),n(A,{show:u.value,"onUpdate:show":t[11]||(t[11]=l=>u.value=l),position:"bottom"},{default:m(()=>[n(oe,{columns:r,onConfirm:T,onCancel:t[10]||(t[10]=l=>u.value=!1)})]),_:1},8,["show"])])}}},Dt=Fe(ut,[["__scopeId","data-v-78d29c47"]]);export{Dt as default};
