import{c as ee,f as ae,t as $,g as te,h as se,p as ne,I as E,H as oe,w as le}from"./index-YqU4SObx.js";/* empty css              *//* empty css              */import{C as ie}from"./index-BeWBmNMz.js";import{T as ce}from"./index-Bopi1UqD.js";import{C as re}from"./index-DVmShwbQ.js";import{N as ue}from"./index-DJaWcGpS.js";import{g as de,a,s as ve,u as pe,_ as me,c as h,k as e,n as L,t as l,w as c,q as Y,d as k,b,m as q,o as i,f as P,F,l as V}from"./index-BndNiVBj.js";import{p as _e,a as fe,P as Q}from"./index-BLz4vbtE.js";import{L as be,B as ye}from"./use-touch-BjYcLiha.js";import{a as G}from"./function-call-CEQAyDn4.js";import"./use-placeholder-B8CRRNTk.js";const[he,d]=ee("action-sheet"),ke=ae({},_e,{title:String,round:$,actions:se(),closeIcon:te("cross"),closeable:$,cancelText:String,description:String,closeOnPopstate:$,closeOnClickAction:Boolean,safeAreaInsetBottom:$}),ge=[...fe,"round","closeOnPopstate","safeAreaInsetBottom"];var we=de({name:he,props:ke,emits:["select","cancel","update:show"],setup(r,{slots:s,emit:_}){const x=n=>_("update:show",n),S=()=>{x(!1),_("cancel")},B=()=>{if(r.title)return a("div",{class:d("header")},[r.title,r.closeable&&a(E,{name:r.closeIcon,class:[d("close"),oe],onClick:S},null)])},T=()=>{if(s.cancel||r.cancelText)return[a("div",{class:d("gap")},null),a("button",{type:"button",class:d("cancel"),onClick:S},[s.cancel?s.cancel():r.cancelText])]},A=n=>{if(n.icon)return a(E,{class:d("item-icon"),name:n.icon},null)},D=(n,v)=>n.loading?a(be,{class:d("loading-icon")},null):s.action?s.action({action:n,index:v}):[a("span",{class:d("name")},[n.name]),n.subname&&a("div",{class:d("subname")},[n.subname])],N=(n,v)=>{const{color:M,loading:y,callback:p,disabled:u,className:O}=n,U=()=>{u||y||(p&&p(n),r.closeOnClickAction&&x(!1),pe(()=>_("select",n,v)))};return a("button",{type:"button",style:{color:M},class:[d("item",{loading:y,disabled:u}),O],onClick:U},[A(n),D(n,v)])},C=()=>{if(r.description||s.description){const n=s.description?s.description():r.description;return a("div",{class:d("description")},[n])}};return()=>a(Q,ve({class:d(),position:"bottom","onUpdate:show":x},ne(r,ge)),{default:()=>{var n;return[B(),C(),a("div",{class:d("content")},[r.actions.map(N),(n=s.default)==null?void 0:n.call(s)]),T()]}})}});const xe=le(we),Pe={class:"membership-page"},Ce={class:"card-section"},Me={class:"card-content"},Oe={class:"card-header"},Se={class:"level-badge"},Ie={class:"qr-placeholder"},ze={class:"card-info"},$e={class:"member-name"},qe={class:"member-id"},Be={class:"card-footer"},Te={key:0,class:"validity"},Ae={key:1,class:"validity"},De={class:"info-section"},Ne={class:"benefits-section"},Ue={class:"benefits-list"},He={key:0,class:"payment-section"},Le={class:"payment-cell-value"},Ye={class:"payment-amount"},Fe={class:"action-section"},Ve={class:"qr-full"},Ee={class:"qr-code-large"},Ke={class:"qr-info"},Re={class:"qr-level"},je={class:"qr-name"},Ge={class:"qr-id"},Qe={class:"payment-popup"},Je={class:"payment-popup-header"},We={class:"payment-summary"},Xe={class:"payment-summary-row"},Ze={class:"payment-summary-row total"},ea={class:"amount"},aa={class:"payment-methods"},ta=["onClick"],sa={class:"method-left"},na={class:"method-info"},oa={class:"method-name"},la={class:"method-desc"},ia={class:"payment-popup-footer"},ca={__name:"MyMembership",setup(r){const s=b({id:"M-2024-0158",name:"陳大明",level:"committee",joinDate:"2022-06-15",expiryDate:"2026-06-30",status:"active"}),_=q(()=>({committee:{name:"未來街坊圈圈委",icon:"⭐⭐⭐",color:"#d69e2e"},citizen:{name:"未來街坊圈圈民",icon:"⭐⭐",color:"#3182ce"},friend:{name:"未來街坊圈圈友",icon:"⭐",color:"#718096"}})[s.value.level]),x=q(()=>({active:{label:"有效",type:"success"},expiring:{label:"即將到期",type:"warning"},expired:{label:"已過期",type:"danger"}})[s.value.status]),S=q(()=>s.value.status==="expiring"||s.value.status==="expired"),B={committee:[{icon:"todo-list-o",text:"參與決策投票",available:!0},{icon:"friends-o",text:"出席理監事會議",available:!0},{icon:"gift-o",text:"專屬會員福利",available:!0},{icon:"calendar-o",text:"優先活動報名",available:!0},{icon:"coupon-o",text:"合作商家折扣",available:!0}],citizen:[{icon:"todo-list-o",text:"參與決策投票",available:!1},{icon:"friends-o",text:"出席會員大會",available:!0},{icon:"gift-o",text:"專屬會員福利",available:!0},{icon:"calendar-o",text:"優先活動報名",available:!0},{icon:"coupon-o",text:"合作商家折扣",available:!0}],friend:[{icon:"todo-list-o",text:"參與決策投票",available:!1},{icon:"friends-o",text:"出席一般會議",available:!0},{icon:"gift-o",text:"專屬會員福利",available:!1},{icon:"calendar-o",text:"查看活動資訊",available:!0},{icon:"coupon-o",text:"合作商家折扣",available:!1}]},T=q(()=>B[s.value.level]),A={paid:"已付款",pending:"待付款",refunded:"已退款"},D={mpay:"MPay 澳門錢包",alipay:"支付寶 (澳門)",wechat:"微信支付",bank:"銀行轉賬",cash:"現金"},N=[{value:"mpay",name:"MPay 澳門錢包",desc:"即時到賬",icon:"balance-o",color:"#e53e3e"},{value:"alipay",name:"支付寶 (澳門)",desc:"即時到賬",icon:"paid",color:"#3182ce"},{value:"wechat",name:"微信支付",desc:"即時到賬",icon:"chat-o",color:"#38a169"},{value:"bank",name:"銀行轉賬",desc:"1-2個工作天確認",icon:"bank-card-o",color:"#d69e2e"},{value:"cash",name:"現金",desc:"到場繳付",icon:"cash-back-record",color:"#718096"}],C=b([{id:1,description:"2025年度會費（一年）",date:"2025-01-15",amount:500,status:"paid",method:"mpay"},{id:2,description:"2024年度會費（一年）",date:"2024-01-20",amount:500,status:"paid",method:"alipay"},{id:3,description:"2023年度會費（一年）",date:"2023-01-18",amount:500,status:"paid",method:"bank"}]),n=b(!1),v=b(!1),M=b(""),y=b(!1),p=b(null),u=b(""),O=b([]),U=()=>{M.value="選擇會籍方案",O.value=[{name:"半年會籍",subname:"MOP$ 300 · 享會員福利",value:"halfYear",price:"MOP$ 300"},{name:"一年會籍",subname:"MOP$ 500 · 更優惠",value:"oneYear",price:"MOP$ 500"}],v.value=!0},K=()=>{M.value="選擇續費方案",O.value=[{name:"續費半年",subname:"MOP$ 300",value:"halfYear",price:"MOP$ 300"},{name:"續費一年",subname:"MOP$ 500 · 更優惠",value:"oneYear",price:"MOP$ 500"}],v.value=!0},J=g=>{v.value=!1,p.value=g,u.value="",y.value=!0},W=()=>{if(!u.value||!p.value)return;const g=!["bank","cash"].includes(u.value),t=p.value.value==="oneYear"?500:300;C.value.unshift({id:Date.now(),description:p.value.name,date:new Date().toISOString().split("T")[0],amount:t,status:g?"paid":"pending",method:u.value}),g?G({type:"success",message:"付款成功！會籍已更新"}):G({type:"success",message:"已提交，請完成付款"}),y.value=!1,p.value=null,u.value=""};return(g,t)=>{const X=ue,m=E,w=re,R=ce,H=ie,I=ye,j=Q,Z=xe;return i(),h("div",Pe,[a(X,{title:"我的會籍"}),e("div",Ce,[e("div",{class:L(["membership-card",s.value.level])},[t[7]||(t[7]=e("div",{class:"card-pattern"},null,-1)),e("div",Me,[e("div",Oe,[t[5]||(t[5]=e("div",{class:"org-name"},"未來街坊",-1)),e("span",Se,l(_.value.icon)+" "+l(_.value.name),1)]),e("div",{class:"qr-section",onClick:t[0]||(t[0]=o=>n.value=!0)},[e("div",Ie,[a(m,{name:"qr",size:"80",color:"#fff"})]),t[6]||(t[6]=e("span",{class:"qr-hint"},"點擊放大",-1))]),e("div",ze,[e("div",$e,l(s.value.name),1),e("div",qe,l(s.value.id),1)]),e("div",Be,[s.value.level!=="friend"?(i(),h("div",Te," 有效期至："+l(s.value.expiryDate),1)):(i(),h("div",Ae," 免費會員 · 無到期限制 "))])])],2)]),e("div",De,[a(H,{inset:"",title:"會籍資訊"},{default:c(()=>[a(w,{title:"會籍類型",value:_.value.name},null,8,["value"]),a(w,{title:"會員編號",value:s.value.id},null,8,["value"]),a(w,{title:"加入日期",value:s.value.joinDate},null,8,["value"]),a(w,{title:"到期日期",value:s.value.level!=="friend"?s.value.expiryDate:"無"},null,8,["value"]),a(w,{title:"會籍狀態"},{value:c(()=>[a(R,{type:x.value.type},{default:c(()=>[P(l(x.value.label),1)]),_:1},8,["type"])]),_:1})]),_:1})]),e("div",Ne,[a(H,{inset:"",title:"會員權益"},{default:c(()=>[e("div",Ue,[(i(!0),h(F,null,V(T.value,(o,z)=>(i(),h("div",{key:z,class:"benefit-item"},[a(m,{name:o.icon,size:"20",color:o.available?"#38a169":"#cbd5e0"},null,8,["name","color"]),e("span",{class:L({disabled:!o.available})},l(o.text),3),o.available?(i(),k(m,{key:0,name:"success",size:"16",color:"#38a169"})):(i(),k(m,{key:1,name:"cross",size:"16",color:"#cbd5e0"}))]))),128))])]),_:1})]),s.value.level!=="friend"?(i(),h("div",He,[a(H,{inset:"",title:"繳費記錄"},{default:c(()=>[(i(!0),h(F,null,V(C.value,o=>(i(),k(w,{key:o.id,title:o.description,label:`${o.date} · ${D[o.method]}`},{value:c(()=>[e("div",Le,[e("span",Ye,"MOP$ "+l(o.amount),1),a(R,{type:o.status==="paid"?"success":"warning",plain:""},{default:c(()=>[P(l(A[o.status]),1)]),_:2},1032,["type"])])]),_:2},1032,["title","label"]))),128)),C.value.length===0?(i(),k(w,{key:0,title:"暫無繳費記錄"})):Y("",!0)]),_:1})])):Y("",!0),e("div",Fe,[s.value.level==="friend"?(i(),k(I,{key:0,type:"primary",block:"",round:"",size:"large",onClick:U},{default:c(()=>[a(m,{name:"star"}),t[8]||(t[8]=P(" 升級成為正式會員 ",-1))]),_:1})):S.value?(i(),k(I,{key:1,type:"warning",block:"",round:"",size:"large",onClick:K},{default:c(()=>[a(m,{name:"replay"}),t[9]||(t[9]=P(" 立即續費 ",-1))]),_:1})):(i(),k(I,{key:2,type:"primary",plain:"",block:"",round:"",size:"large",onClick:K},{default:c(()=>[...t[10]||(t[10]=[P(" 提前續費 ",-1)])]),_:1}))]),a(j,{show:n.value,"onUpdate:show":t[1]||(t[1]=o=>n.value=o),round:"",style:{padding:"30px","text-align":"center"}},{default:c(()=>[e("div",Ve,[e("div",Ee,[a(m,{name:"qr",size:"200",color:"#1a365d"})]),e("div",Ke,[e("div",Re,l(_.value.icon)+" "+l(_.value.name),1),e("div",je,l(s.value.name),1),e("div",Ge,l(s.value.id),1)])])]),_:1},8,["show"]),a(Z,{show:v.value,"onUpdate:show":t[2]||(t[2]=o=>v.value=o),title:M.value,actions:O.value,onSelect:J},null,8,["show","title","actions"]),a(j,{show:y.value,"onUpdate:show":t[4]||(t[4]=o=>y.value=o),position:"bottom",round:"",style:{minHeight:"45%"}},{default:c(()=>{var o,z;return[e("div",Qe,[e("div",Je,[t[11]||(t[11]=e("h3",null,"選擇付款方式",-1)),a(m,{name:"cross",onClick:t[3]||(t[3]=f=>y.value=!1)})]),e("div",We,[e("div",Xe,[t[12]||(t[12]=e("span",null,"方案",-1)),e("span",null,l((o=p.value)==null?void 0:o.name),1)]),e("div",Ze,[t[13]||(t[13]=e("span",null,"費用",-1)),e("span",ea,l((z=p.value)==null?void 0:z.price),1)])]),e("div",aa,[(i(),h(F,null,V(N,f=>e("div",{key:f.value,class:L(["payment-method-item",{selected:u.value===f.value}]),onClick:ra=>u.value=f.value},[e("div",sa,[a(m,{name:f.icon,size:"24",color:f.color},null,8,["name","color"]),e("div",na,[e("span",oa,l(f.name),1),e("span",la,l(f.desc),1)])]),u.value===f.value?(i(),k(m,{key:0,name:"success",color:"#38a169",size:"20"})):Y("",!0)],10,ta)),64))]),e("div",ia,[a(I,{type:"primary",block:"",round:"",size:"large",disabled:!u.value,onClick:W},{default:c(()=>[...t[14]||(t[14]=[P(" 確認付款 ",-1)])]),_:1},8,["disabled"])])])]}),_:1},8,["show"])])}}},wa=me(ca,[["__scopeId","data-v-da137765"]]);export{wa as default};
