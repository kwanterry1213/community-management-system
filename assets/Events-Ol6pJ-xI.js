var O=(u,_,m)=>new Promise((h,s)=>{var c=d=>{try{i(m.next(d))}catch(f){s(f)}},v=d=>{try{i(m.throw(d))}catch(f){s(f)}},i=d=>d.done?h(d.value):Promise.resolve(d.value).then(c,v);i((m=m.apply(u,_)).next())});import{w as N,n as U,t as se,e as ae,c as oe,I as le}from"./index-CDxJsEB3.js";/* empty css              *//* empty css              */import{P as ne}from"./index-BYPyhoAA.js";import{E as ie}from"./index-Be7OMIoQ.js";import{T as re}from"./index-BMJCaU96.js";/* empty css              *//* empty css              *//* empty css              */import{N as de}from"./index-CvtmVt3d.js";import{h as ue,a as l,m as A,_ as ce,c as b,b as p,r as w,o as r,k as e,F as L,l as F,t as n,n as x,g,e as E,p as pe,q as P}from"./index-CYNoNFn7.js";import{T as me,a as ve}from"./index-eYf9Q_JG.js";import{s as fe,a as R}from"./function-call-CrsSUfte.js";import{s as ye,a as C}from"./function-call-B8E4hwbK.js";import{P as _e}from"./index--jaruAqB.js";import{B as he}from"./index-BTb55al6.js";import"./use-touch-CoLEfbaL.js";import"./use-id-zzKfe8rB.js";import"./use-placeholder-CGcD_-36.js";import"./use-route-5Jp667pb.js";import"./index-RZEO5At_.js";import"./interceptor-SwkErRcB.js";N(ye);N(fe);const[ge,I]=oe("progress"),ke={color:String,inactive:Boolean,pivotText:String,textColor:String,showPivot:se,pivotColor:String,trackColor:String,strokeWidth:U,percentage:{type:U,default:0,validator:u=>+u>=0&&+u<=100}};var be=ue({name:ge,props:ke,setup(u){const _=A(()=>u.inactive?void 0:u.color),m=s=>Math.min(Math.max(+s,0),100),h=()=>{const{textColor:s,pivotText:c,pivotColor:v,percentage:i}=u,d=m(i),f=c!=null?c:`${i}%`;if(u.showPivot&&f){const T={color:s,left:`${d}%`,transform:`translate(-${d}%,-50%)`,background:v||_.value};return l("span",{style:T,class:I("pivot",{inactive:u.inactive})},[f])}};return()=>{const{trackColor:s,percentage:c,strokeWidth:v}=u,i=m(c),d={background:s,height:ae(v)},f={width:`${i}%`,background:_.value};return l("div",{class:I(),style:d},[l("span",{class:I("portion",{inactive:u.inactive}),style:f},null),h()])}}});const we=N(be),Ee={class:"events-page"},Pe={class:"event-list"},Se=["onClick"],$e=["src"],Ce={class:"event-content"},Me={class:"event-date-badge"},xe={class:"month"},Te={class:"day"},qe={class:"event-info"},Be={class:"event-title"},Oe={class:"event-meta"},Ie={class:"event-footer"},Ne={class:"event-progress"},Ve={class:"progress-text"},ze={key:1,class:"enrolled-status"},De={key:0,class:"event-detail"},Ue=["src"],Le={class:"detail-content"},Fe={class:"detail-info-list"},Re={class:"detail-info-item"},Ae={class:"value"},We={class:"detail-info-item"},He={class:"value"},je={class:"detail-info-item"},Ge={class:"value"},Je={key:0,class:"detail-info-item"},Ke={class:"value"},Qe={key:1,class:"detail-info-item"},Xe={key:2,class:"detail-info-item"},Ye={class:"value"},Ze={class:"detail-description"},et={class:"detail-footer"},tt={class:"payment-popup"},st={class:"payment-popup-header"},at={class:"payment-summary"},ot={class:"payment-summary-row"},lt={class:"payment-summary-row total"},nt={class:"amount"},it={class:"payment-methods"},rt=["onClick"],dt={class:"method-left"},ut={class:"method-info"},ct={class:"method-name"},pt={class:"method-desc"},mt={class:"payment-popup-footer"},vt={__name:"Events",setup(u){const _=w("all"),m=w(!1),h=w(!1),s=w(null),c=w(!1),v=w(null),i=w(""),d={seminar:"講座",gathering:"聚會",workshop:"工作坊",meeting:"會議"},f={pending:"待付款",paid:"已付款",refunded:"已退款"},T={mpay:"MPay 澳門錢包",alipay:"支付寶 (澳門)",wechat:"微信支付",bank:"銀行轉賬",cash:"現金"},W=[{value:"bank",name:"銀行轉賬",desc:"1-2個工作天確認",icon:"bank-card-o",color:"#d69e2e"},{value:"cash",name:"現金",desc:"到場繳付",icon:"cash-back-record",color:"#718096"}],q=w([{id:1,title:"街坊創業分享會",type:"seminar",date:"2026/02/15",time:"14:00 - 16:00",location:"社區中心 B1 會議室",image:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600&h=300&fit=crop",enrolled:23,quota:30,fee:0,memberOnly:!1,isEnrolled:!1,paymentStatus:null,paymentMethod:null,description:"邀請多位成功創業的街坊分享他們的創業心得與經驗，適合想創業或正在創業的朋友參加。"},{id:2,title:"新春團拜聚餐",type:"gathering",date:"2026/02/20",time:"18:00 - 21:00",location:"金龍餐廳 (中正路88號)",image:"https://images.unsplash.com/photo-1555244162-803834f70033?w=600&h=300&fit=crop",enrolled:45,quota:50,fee:80,memberOnly:!0,isEnrolled:!0,paymentStatus:"paid",paymentMethod:"bank",description:"一年一度的新春團拜聚餐，歡迎所有圈圈委及圈圈民攜家帶眷參加！"},{id:3,title:"AI 應用工作坊",type:"workshop",date:"2026/03/01",time:"09:00 - 12:00",location:"創新中心 3F",image:"https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=600&h=300&fit=crop",enrolled:15,quota:20,fee:80,memberOnly:!1,isEnrolled:!1,paymentStatus:null,paymentMethod:null,description:"學習如何在日常工作中運用 AI 工具提升效率，實作練習為主。"},{id:4,title:"第一季會員大會",type:"meeting",date:"2026/03/15",time:"19:00 - 21:00",location:"社區中心 大禮堂",image:"https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=600&h=300&fit=crop",enrolled:58,quota:100,fee:0,memberOnly:!1,isEnrolled:!1,paymentStatus:null,paymentMethod:null,description:"2026年第一季會員大會，討論年度計畫與預算，歡迎所有圈圈友以上會員參加。"}]),V=A(()=>_.value==="all"?q.value:_.value==="mine"?q.value.filter(o=>o.isEnrolled):q.value.filter(o=>o.type===_.value)),H=o=>{const[,t]=o.split("/");return`${parseInt(t)}月`},j=o=>{const[,,t]=o.split("/");return t},G=o=>{s.value=o,h.value=!0},z=o=>O(null,null,function*(){try{yield R({title:"確認報名",message:`確定要報名「${o.title}」嗎？${o.fee>0?`
費用：MOP$ ${o.fee}`:""}`}),o.fee>0?(v.value=o,i.value="",h.value=!1,c.value=!0):(o.isEnrolled=!0,o.enrolled++,C({type:"success",message:"報名成功！"}),h.value=!1)}catch(t){}}),J=()=>{const o=v.value;!o||!i.value||(o.isEnrolled=!0,o.enrolled++,o.paymentMethod=i.value,i.value==="bank"||i.value==="cash"?(o.paymentStatus="pending",C({type:"success",message:"報名成功！請完成付款"})):(o.paymentStatus="paid",C({type:"success",message:"報名並付款成功！"})),c.value=!1,v.value=null,i.value="")},K=o=>O(null,null,function*(){try{yield R({title:"取消報名",message:o.paymentStatus==="paid"?"取消報名後將會安排退款，確定要取消嗎？":"確定要取消報名嗎？"}),o.isEnrolled=!1,o.enrolled--,o.paymentStatus==="paid"?(o.paymentStatus="refunded",C({message:"已取消報名，退款處理中"})):(o.paymentStatus=null,o.paymentMethod=null,C({message:"已取消報名"})),h.value=!1}catch(t){}}),Q=()=>{setTimeout(()=>{m.value=!1},1e3)};return(o,t)=>{const X=de,S=ve,Y=me,y=le,Z=we,$=he,B=re,ee=ie,te=ne,D=_e;return r(),b("div",Ee,[l(X,{title:"活動"}),l(Y,{active:_.value,"onUpdate:active":t[0]||(t[0]=a=>_.value=a),sticky:""},{default:p(()=>[l(S,{title:"全部",name:"all"}),l(S,{title:"講座",name:"seminar"}),l(S,{title:"聚會",name:"gathering"}),l(S,{title:"工作坊",name:"workshop"}),l(S,{title:"我的報名",name:"mine"})]),_:1},8,["active"]),l(te,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a),onRefresh:Q},{default:p(()=>[e("div",Pe,[(r(!0),b(L,null,F(V.value,a=>(r(),b("div",{key:a.id,class:"event-card",onClick:M=>G(a)},[e("img",{src:a.image,class:"event-cover"},null,8,$e),e("div",Ce,[e("div",Me,[e("span",xe,n(H(a.date)),1),e("span",Te,n(j(a.date)),1)]),e("div",qe,[e("span",{class:x(["event-type-tag",a.type])},n(d[a.type]),3),e("h3",Be,n(a.title),1),e("div",Oe,[e("span",null,[l(y,{name:"clock-o"}),g(" "+n(a.time),1)]),e("span",null,[l(y,{name:"location-o"}),g(" "+n(a.location),1)])]),e("div",Ie,[e("div",Ne,[l(Z,{percentage:a.enrolled/a.quota*100,"show-pivot":!1,"stroke-width":"4"},null,8,["percentage"]),e("span",Ve,n(a.enrolled)+"/"+n(a.quota)+" 人已報名",1)]),!a.isEnrolled&&a.enrolled<a.quota?(r(),E($,{key:0,size:"small",type:"primary",round:"",onClick:pe(M=>z(a),["stop"])},{default:p(()=>[...t[7]||(t[7]=[g(" 報名 ",-1)])]),_:1},8,["onClick"])):a.isEnrolled?(r(),b("div",ze,[l(B,{type:"success",round:""},{default:p(()=>[...t[8]||(t[8]=[g("已報名",-1)])]),_:1}),a.fee>0?(r(),E(B,{key:0,type:a.paymentStatus==="paid"?"success":"warning",round:"",plain:""},{default:p(()=>[g(n(f[a.paymentStatus]),1)]),_:2},1032,["type"])):P("",!0)])):(r(),E(B,{key:2,type:"default",round:""},{default:p(()=>[...t[9]||(t[9]=[g("已額滿",-1)])]),_:1}))])])])],8,Se))),128)),V.value.length===0?(r(),E(ee,{key:0,description:"暫無活動"})):P("",!0)])]),_:1},8,["modelValue"]),l(D,{show:h.value,"onUpdate:show":t[4]||(t[4]=a=>h.value=a),position:"bottom",round:"",style:{height:"80%"}},{default:p(()=>[s.value?(r(),b("div",De,[e("img",{src:s.value.image,class:"detail-cover"},null,8,Ue),e("div",Le,[e("span",{class:x(["event-type-tag",s.value.type])},n(d[s.value.type]),3),e("h2",null,n(s.value.title),1),e("div",Fe,[e("div",Re,[l(y,{name:"clock-o"}),e("div",null,[t[10]||(t[10]=e("span",{class:"label"},"時間",-1)),e("span",Ae,n(s.value.date)+" "+n(s.value.time),1)])]),e("div",We,[l(y,{name:"location-o"}),e("div",null,[t[11]||(t[11]=e("span",{class:"label"},"地點",-1)),e("span",He,n(s.value.location),1)])]),e("div",je,[l(y,{name:"friends-o"}),e("div",null,[t[12]||(t[12]=e("span",{class:"label"},"人數",-1)),e("span",Ge,n(s.value.enrolled)+"/"+n(s.value.quota)+" 人",1)])]),s.value.fee?(r(),b("div",Je,[l(y,{name:"gold-coin-o"}),e("div",null,[t[13]||(t[13]=e("span",{class:"label"},"費用",-1)),e("span",Ke,n(s.value.memberOnly?"會員專屬":`MOP$ ${s.value.fee}`),1)])])):P("",!0),s.value.isEnrolled&&s.value.fee>0?(r(),b("div",Qe,[l(y,{name:"balance-o"}),e("div",null,[t[14]||(t[14]=e("span",{class:"label"},"付款狀態",-1)),e("span",{class:x(["value","payment-status",s.value.paymentStatus])},n(f[s.value.paymentStatus]),3)])])):P("",!0),s.value.isEnrolled&&s.value.fee>0&&s.value.paymentMethod?(r(),b("div",Xe,[l(y,{name:"credit-pay"}),e("div",null,[t[15]||(t[15]=e("span",{class:"label"},"付款方式",-1)),e("span",Ye,n(T[s.value.paymentMethod]),1)])])):P("",!0)]),e("div",Ze,[t[16]||(t[16]=e("h4",null,"活動說明",-1)),e("p",null,n(s.value.description||"歡迎所有街坊參與！詳細內容請關注後續通知。"),1)])]),e("div",et,[!s.value.isEnrolled&&s.value.enrolled<s.value.quota?(r(),E($,{key:0,type:"primary",block:"",round:"",onClick:t[2]||(t[2]=a=>z(s.value))},{default:p(()=>[g(n(s.value.fee>0?`立即報名 (MOP$ ${s.value.fee})`:"立即報名"),1)]),_:1})):s.value.isEnrolled?(r(),E($,{key:1,type:"danger",plain:"",block:"",round:"",onClick:t[3]||(t[3]=a=>K(s.value))},{default:p(()=>[...t[17]||(t[17]=[g(" 取消報名 ",-1)])]),_:1})):(r(),E($,{key:2,disabled:"",block:"",round:""},{default:p(()=>[...t[18]||(t[18]=[g("已額滿",-1)])]),_:1}))])])):P("",!0)]),_:1},8,["show"]),l(D,{show:c.value,"onUpdate:show":t[6]||(t[6]=a=>c.value=a),position:"bottom",round:"",style:{minHeight:"40%"}},{default:p(()=>{var a,M;return[e("div",tt,[e("div",st,[t[19]||(t[19]=e("h3",null,"選擇付款方式",-1)),l(y,{name:"cross",onClick:t[5]||(t[5]=k=>c.value=!1)})]),e("div",at,[e("div",ot,[t[20]||(t[20]=e("span",null,"活動",-1)),e("span",null,n((a=v.value)==null?void 0:a.title),1)]),e("div",lt,[t[21]||(t[21]=e("span",null,"費用",-1)),e("span",nt,"MOP$ "+n((M=v.value)==null?void 0:M.fee),1)])]),e("div",it,[(r(),b(L,null,F(W,k=>e("div",{key:k.value,class:x(["payment-method-item",{selected:i.value===k.value}]),onClick:ft=>i.value=k.value},[e("div",dt,[l(y,{name:k.icon,size:"24",color:k.color},null,8,["name","color"]),e("div",ut,[e("span",ct,n(k.name),1),e("span",pt,n(k.desc),1)])]),i.value===k.value?(r(),E(y,{key:0,name:"success",color:"#38a169",size:"20"})):P("",!0)],10,rt)),64))]),e("div",mt,[l($,{type:"primary",block:"",round:"",size:"large",disabled:!i.value,onClick:J},{default:p(()=>[...t[22]||(t[22]=[g(" 確認付款 ",-1)])]),_:1},8,["disabled"])])])]}),_:1},8,["show"])])}}},Ut=ce(vt,[["__scopeId","data-v-7d00300d"]]);export{Ut as default};
